id: k-2026-0216-033
title: Unity test framework requires setUp/tearDown stubs
body: |-
  When using vendored Unity (ThrowTheSwitch) for native C tests, the linker will fail with undefined symbols `_setUp` and `_tearDown` if you don't define them. Unity's `UnityDefaultTestRun` calls both before/after each test.

  Fix: Add empty stubs in your test main.c:
  ```c
  void setUp(void) {}
  void tearDown(void) {}
  ```

  This is not needed in ESP-IDF because the ESP-IDF Unity component provides these. It IS needed for standalone/native builds.
category: toolchain
severity: informational
applies_to:
  boards: []
  chips: []
  tools: []
  subsystems:
  - testing
file_patterns:
- '**/tests/native/*.c'
status: unvalidated
validated_by: []
deprecated: false
superseded_by: null
created: 2026-02-16
updated: 2026-02-16
author: claude
source_session: null
tags:
- Unity
- testing
- native
- linker
