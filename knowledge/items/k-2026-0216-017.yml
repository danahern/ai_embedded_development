id: k-2026-0216-017
title: 'Twister fails on macOS with pyenv: python command not found'
body: 'Twister''s `get_toolchain()` runs cmake''s `verify-toolchain.cmake` and parses JSON from stdout. On macOS with pyenv, the shim for `python` (not python3) emits error text to stderr which gets merged into stdout via `stderr=subprocess.STDOUT`, causing JSON parsing to fail. Workaround: remove pyenv shims from PATH before running twister, or ensure pyenv has a `python` version set globally. The zephyr-build MCP''s `run_tests` tool doesn''t handle this â€” must run twister manually with filtered PATH.'
category: toolchain
severity: important
applies_to:
  boards: []
  chips: []
  tools:
  - twister
  - pyenv
  subsystems: []
file_patterns: []
status: unvalidated
validated_by: []
deprecated: true
superseded_by: k-2026-0216-018
created: 2026-02-16
updated: 2026-02-16
author: claude
source_session: null
tags:
- zephyr
- twister
- macos
- pyenv
- toolchain-detection
