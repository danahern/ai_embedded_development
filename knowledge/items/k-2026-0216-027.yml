id: k-2026-0216-027
title: "probe-rs udev rules required for flash/debug on Linux (errno 13)"
body: |-
  On Linux, `probe-rs list` works without udev rules (read-only USB enumeration), but all write operations (`download`, `run`, `attach`, `reset`) fail with errno 13 (permission denied).

  This is deceptive because `probe-rs list` succeeding makes it look like the tool is working, but actual flashing fails.

  Fix — install udev rules and add user to plugdev group:
  ```bash
  curl -fsSL https://probe.rs/files/69-probe-rs.rules | sudo tee /etc/udev/rules.d/69-probe-rs.rules
  sudo udevadm control --reload-rules
  sudo udevadm trigger
  sudo usermod -aG plugdev $USER
  ```

  The user must log out and back in (or start a new login shell) for the group change to take effect.

  For CI self-hosted runners:
  - Install udev rules during runner setup, not per-workflow
  - Ensure the runner service user is in the `plugdev` group
  - If using `systemd` to manage the runner, the service runs as the configured user — verify that user has the group membership
  - On WSL2, udev rules may not apply — check `udevadm` availability

  Symptoms when rules are missing:
  ```
  Error: An operation could not be performed because it lacked the permission to do so: An USB operation could not be performed because it lacked the permission to do so.
  ```
category: operational
severity: critical
applies_to:
  boards: []
  chips: []
  tools:
  - probe-rs
  subsystems:
  - flash
  - ci
file_patterns:
- '**/.github/workflows/*.yml'
- '**/setup.sh'
- '**/69-probe-rs.rules'
status: unvalidated
validated_by: []
deprecated: false
superseded_by: null
created: 2026-02-16
updated: 2026-02-16
author: claude
source_session: null
tags:
- probe-rs
- udev
- linux
- permissions
- ci
